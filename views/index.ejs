<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Harv Blog</title>
    <link rel="stylesheet" href="./styles.css" />
    <link rel="icon" href="./Assets/we tech.png" />
    <link
      rel="stylesheet"
      href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css"
    />
  </head>

  <script>
    <% if (alert != "") { %>
      alert("<%= alert %>");
    <% } %>
  </script>
  <body>
    <nav class="section-p1 section-m1">
      <div class="logo">
        <img src="./Assets/we tech.png" width="80" alt="" />
      </div>
      <div class="list">
        <% if (login) {%>
        <li><a href="./home">Home</a></li>
        <li><a href="./profile">Profile</a></li>
        <li><a href="./publish" class="active">Publish</a></li>
        <li><a href="./signout">Logout</a></li>
        <% } else { %>
        <li><a href="./">Home</a></li>
        <li><a href="./signin" class="active">Accounts</a></li>
        <% } %>
        <li id="times"><i class="far fa-times times"></i></li>
      </div>
      <div class="hamburger">
        <i class="fas fa-outdent"></i>
      </div>
    </nav>

    <!-- Random Post -->
    <% if (posts.length > 0) { %> <% const randomIndex=Math.floor(Math.random()
    * posts.length); %> <% const randomPost=posts[randomIndex]; %>

    <section class="first section-p1">
      <a class="nolink" href="/post/<%= randomPost.id%>">            
      <div class="card">
        <div class="profile-image">
            <img src="./Assets/Main-Article.png" width="100%" alt="" />
          </div>
          <div class="writeup">
            <h2><%= randomPost.title %></h2>
            <p><%= randomPost.body %></p>
            <div class="profile-img">
              <img src="<%= randomPost.author.image %>" width="10%" alt="" />
              <div class="profile-infot">
                <h3><%= randomPost.author.name %></h3>
                <p><%= randomPost.author.skill %></p>
              </div>
            </div>
          </div>
        </div>
      </a>
      </section>

    <% } else { %>
    <section class="second section-p1">
      <div class="container">
        <p>No posts available.</p>
      </div>
    </section>
    <% } %>
    <br />
    <% let i = 1; let first = i; %> <% if (posts.length > 0) { %> <%
    posts.forEach((post) => { %> <% if (first == i) {%>
    <section class="second section-p1">
      <div class="container">
        <%}%>
        <div class="blog">
          <a class="nolink" href="/post/<%= post.id%>">        
          <div class="blog-post">
            <img src="./Assets/Article1.png" width="100%" alt="" />
            <h2><%= post.title %></h2>
            <p><%= post.body %></p>
          </div>
          <div class="profile-img">
            <img src="<%= post.author.image || './profile-pic' %>" width="15%" alt="" />
            <div class="profile-info">
              <h3><%= post.author.name %></h3>
              <p><%= post.author.skill %></p>
            </div>
          </div>
          </a>
        </div>
        <% if (i % 3 == 0) {first = i + 1;%>
      </div>
    </section>
    <% } %> <% i++; %> <% }); %> <% } %>
    <% if ((i - 1) % 3 != 0) { %>
      </div>
    </section>
    <% }%>

    <footer class="section-p1">
      <div class="logo">
        <img src="./Assets/we tech.png" width="80" alt="" />
      </div>
      <div class="copy">
        <p>Unifeed &copy; 2023 All Copyrights Reserved</p>
      </div>
    </footer>

    <script src="script.js"></script>
  </body>
</html>
